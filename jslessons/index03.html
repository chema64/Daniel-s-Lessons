<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
    
        <!-- <link rel="stylesheet" href="style.css"> -->
        <style>
        /* ------------------- css ------------------- */
        html, body {
            font-family: sans-serif;
        }
        body div {
            margin: 0.5em;
            min-height: 10px;
            /*min-width: 10px;*/
            background-color: pink;
        }
        table {
            padding: 1em;
            border-spacing: 5px;
        }
        td {
            background-color: #f8f8f8;
            padding: 0.1em 0.75em;
            text-align: right;
        }
        </style>
    </head>

    <body>
        <!-- ::::::::::::::::: html ::::::::::::::::: -->



        <script>
// ===================== js =====================

// ----------------------------------------------
function diceRollResultsListSpesh(numberOfDice, diceSides) {

    //setting oldList to zero allows oldList to be populated
    let oldList = [0]
    let freshList = []

    //number of times dice are rolled
    for (var nextRoll = 1; nextRoll <= numberOfDice; nextRoll++) {
        
        // console.log(nextRoll, numberOfDice)'
        freshList = []

        /*creates all possible dice roll values from dice roll data stored in oldRes array. 
          freshList is populated with these new results*/
        oldList.forEach( function(oldRes) {
            for (var possibleResult = 1; possibleResult <= diceSides; possibleResult++) {
                freshList.push(oldRes + possibleResult)
            }
        })
        
        // console.log('spesh, after loop ' + nextRoll + ': ', freshList)
        oldList = freshList
    }

    return oldList

}
// ----------------------------------------------
function diceRollResultsList(numberOfDice, diceSides) {

    let oldList = []
    let freshList = []


    for (var firstRollResults = 1; firstRollResults <= diceSides; firstRollResults++) {
        oldList.push(firstRollResults)
    }

    // console.log('normal, before looping: ', oldList)

    for (var nextRoll = 1; nextRoll <= numberOfDice - 1; nextRoll++) {
        
        // console.log(nextRoll, numberOfDice)
        freshList = []

        for (var oldResultIndex = 0; oldResultIndex < oldList.length; oldResultIndex++ ) {
            var oldRes = oldList[oldResultIndex]

            for (var possibleResult = 1; possibleResult <= diceSides; possibleResult++) {
                freshList.push(oldRes + possibleResult)
            }
        }


        // console.log('normal, after loop ' + nextRoll + ': ', freshList)
        oldList = freshList
    }

    return oldList

}

// ----------------------------------------------
function makeDiv(divLength) {
    const div = document.createElement("div")
    div.style.width = divLength + "em"
    // document.body.appendChild(div)
    return div
}

// ----------------------------------------------
function setContent(div, divContent) {
    div.innerHTML = divContent
}
// ----------------------------------------------
function createDiceRollProbability(rawData) {
    
    let resultData = [] 

    rawData.forEach(function(element) {

    if(resultData[element]) {
        // console.log(true)
        resultData[element] += 1;
    }
    else
    {
        // console.log(false)
        resultData[element] = 1;
    }


    });

    return resultData

}

// ----------------------------------------------
function printProbabilityResults(resultData) {

    resultData.forEach(function(element, index) {
        // console.log(element)
        let div = makeDiv(element)
        document.body.appendChild(div)
        setContent(div, '' + index + ' ' + element)

    })
}

// ----------------------------------------------
function printProbabilityTable(resultData) {

    var table = document.createElement("table")

    var totalRollCount = 0
    var maxRollCount = 0

    //sum total number of rolls
    resultData.forEach(function(count) {
        
        totalRollCount += count
        if(maxRollCount < count) {
            // console.log(count)
            // console.log(maxRollCount)
            maxRollCount = count

        }
        
        // console.log("max " + maxRollCount)
    })

    // console.log('total ' + totalRollCount)
    // console.log("max2 " + maxRollCount)
    
    resultData.forEach(function(count, outcome) {

        // make the row
        var tr = document.createElement("tr")
        table.appendChild(tr)

        // do the outcome cell
        var outcomeCell = document.createElement("td")
        outcomeCell.innerHTML = outcome
        tr.appendChild(outcomeCell)

        // do the ratio cell
        var ratioCell = document.createElement("td")
        ratioCell.innerHTML = count  + '/' + totalRollCount
        tr.appendChild(ratioCell)

        // do the percentage cell
        var ratioCell = document.createElement("td")
        ratioCell.innerHTML = Math.round(count / totalRollCount * 1000)/10 + '%'
        tr.appendChild(ratioCell)


        // do the graph bar cell
        var divCell = document.createElement("td")
        var div = makeDiv(count)
        var divWidth = count / maxRollCount * 200
        div.style.width = divWidth + "px"

        divCell.appendChild(div)
        tr.appendChild(divCell)

    })

    document.body.appendChild(table)
}
// ----------------------------------------------

var rawData = []
rawData = diceRollResultsList(5, 5)

var resultData = [] 
resultData = createDiceRollProbability(rawData)
// console.log(resultData)

// printProbabilityResults(resultData)
printProbabilityTable(resultData)


// var table = document.createElement("table")
// // var tr = document.createElement("tr")
// // var td = document.createElement("td")

// // table.appendChild(tr)
// // tr.appendChild(td)
// // td.innerHTML = "test"

// for (var row = 1; row <= 5; row++) {
    
//     var tr = document.createElement("tr")
    
//     table.appendChild(tr)
    
//     for (var cell = 1; cell <= 2; cell++) {
//         var td = document.createElement("td")
//         tr.appendChild(td)

//         if(cell === 1) {
//             td.innerHTML = "row " + row
//         } else {

            
//             var div = makeDiv(row)
//             td.appendChild(div)
//         }
//     }    
// }

// document.body.appendChild(table)



// ===================== js =====================
        </script>

    </body>
</html>

